# Build del frontend para Netlify
[build]
  base    = "client"
  command = "npm run build"
  publish = "dist"

# Evitar caché del HTML para que cada deploy se vea al instante (los .js/.css con hash sí pueden cachearse)
[[headers]]
  for    = "/index.html"
  [headers.values]
    Cache-Control = "no-cache, no-store, must-revalidate"

# Proxy API a Railway (evita CORS: el frontend llama a /api en Netlify, Netlify reenvía a Railway)
[[redirects]]
  from   = "/api/*"
  to     = "https://spectra-production-2b6b.up.railway.app/api/:splat"
  status = 200
  force  = true

# SPA: todas las rutas sirven index.html
[[redirects]]
  from    = "/*"
  to      = "/index.html"
  status  = 200
